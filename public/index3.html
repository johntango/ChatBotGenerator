<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Popup App Generator</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
      .dark-mode {
        background-color: #333;
        color: white;
      }
      .preview {
        border: 1px solid black;
        padding: 20px;
        border-radius: 8px;
      }
    </style>
  </head>
  <body class="bg-light text-dark">
    <div class="container mt-4">
      <h1 class="text-center">Agent Generator</h1>
      <ul class="list-group list-group-numbered">
        <li class="list-group-item">Create or Get Assistant in OpenAI. If Assistant already has VectorDB, ignore the next step.</li>
        <li class="list-group-item">Upload Files to VectorDB and Attach to Assistant if Needed.</li>
        <li class="list-group-item">Generate App Code for WebPage.</li>
      </ul>

      <div class="d-flex flex-column-reverse flex-lg-row gap-4 mt-4">
        <!-- Left Column -->
        <div class="col-lg-6">
          <form id="generator-form" class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="title" class="form-label">Title of App:</label>
              <input type="text" class="form-control" id="title" name="title" required />
            </div>

            <div class="mb-3">
              <label for="assistant_name" class="form-label">Assistant Name:</label>
              <input type="text" class="form-control" id="assistant_name" name="assistant_name" required />
            </div>

            <div class="mb-3">
              <label for="assistantMessage" class="form-label">Assistant System Message:</label>
              <input type="text" class="form-control" id="assistantMessage" name="assistantMessage" required />
            </div>

            <div class="mb-3">
              <label for="modelSelect" class="form-label">Choose a model:</label>
              <select id="modelSelect" class="form-select" name="model">
                <option value="gpt-4o-2024-08-06">gpt-4o-2024-08-06</option>
                <option value="gpt-4o-2024-05-13">gpt-4o-2024-05-13</option>
                <option value="gpt-4-turbo-preview">gpt-4-turbo-preview</option>
                <option value="gpt-4-turbo-2024-04-09">gpt-4-turbo-2024-04-09</option>
                <option value="gpt-4-turbo">gpt-4-turbo</option>
                <option value="gpt-4-1106-preview" selected>gpt-4-1106-preview</option>
                <option value="gpt-4-0613">gpt-4-0613</option>
                <option value="gpt-4-0125-preview">gpt-4-0125-preview</option>
                <option value="gpt-4">gpt-4</option>
                <option value="gpt-3.5-turbo-16k">gpt-3.5-turbo-16k</option>
                <option value="gpt-3.5-turbo-1106">gpt-3.5-turbo-1106</option>
              </select>
            </div>

            <div class="d-grid gap-2">
              <button id="createAssistant" type="button" class="btn btn-primary">Create or Get Assistant</button>
            </div>

            <div class="my-3">
              <label for="dir_path" class="form-label">Directory Path for Files Upload:</label>
              <input type="text" class="form-control" id="dir_path" name="dir_path" />
            </div>

            <div class="mb-3">
              <label for="embed_type" class="form-label">Embed Type:</label>
              <select id="embed_type" class="form-select" name="embed_type">
                <option value="openai">OpenAI</option>
                <option value="local">Local</option>
              </select>
              <button id="uploadFiles" type="button" class="btn btn-secondary mt-2">Upload Files to VectorDB</button>
            </div>

            <div class="mb-3">
              <label for="agent_instructions" class="form-label">Agent System Instructions:</label>
              <input type="text" class="form-control" id="agent_instructions" name="agent_instructions" required />
            </div>

            <div class="mb-3">
              <label for="initialMessage" class="form-label">Initial Message:</label>
              <input type="text" class="form-control" id="initialMessage" name="initialMessage" />
            </div>

            <div class="mb-3">
              <label for="promptPlaceholder" class="form-label">Prompt Placeholder:</label>
              <input type="text" class="form-control" id="promptPlaceholder" name="promptPlaceholder" required />
            </div>

            <div class="mb-3">
              <label for="mode" class="form-label">Mode:</label>
              <select id="mode" class="form-select" name="mode">
                <option value="light">Light</option>
                <option value="dark">Dark</option>
              </select>
            </div>

            <div class="d-grid gap-2">
              <button id="generate_agent" type="button" class="btn btn-success">Generate Agent Code</button>
            </div>
          </form>
        </div>

        <!-- Right Column -->
        <div class="col-lg-6">
          <div id="preview" class="preview">
            <h2 id="preview-title">Agent</h2>
            <div class="mb-2">
              <strong>System Message:</strong>
              <input id="preview-system" class="form-control" type="text" />
            </div>

            <div class="mb-2">
              <strong>Initial Messages:</strong>
              <input id="preview-initial-list" class="form-control" type="text" />
            </div>

            <div class="mb-2">
              <strong>Prompt:</strong>
              <input id="preview-prompt" class="form-control" type="text" placeholder="[Prompt Placeholder]" />
              <button id="runThread" type="button" class="btn btn-primary mt-2">&#8594;</button>
              <button id="newThread" type="button" class="btn btn-outline-secondary mt-2">New Thread</button>
            </div>

            <div class="mt-3">
              <strong>Response:</strong>
              <div id="preview-response" class="p-3 border rounded" style="height: 200px; overflow-y: auto">[Response]</div>
            </div>
          </div>
        </div>
      </div>

      <div class="form-check form-switch mt-4">
        <input class="form-check-input" type="checkbox" id="toggleDarkMode" />
        <label class="form-check-label" for="toggleDarkMode">Enable Dark Mode</label>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        function toggleDarkMode() {
          const isDark = document.getElementById("toggleDarkMode").checked;
          document.body.classList.toggle("bg-dark", isDark);
          document.body.classList.toggle("text-light", isDark);
        }

        document.getElementById("toggleDarkMode").addEventListener("change", toggleDarkMode);

        function updatePreview() {
          document.getElementById("preview-title").innerText = document.getElementById("title").value || "[Title]";
          document.getElementById("preview-system").value = document.getElementById("agent_instructions").value || "[System Message]";
          document.getElementById("preview-initial-list").value = document.getElementById("initialMessage").value || "[Test Message]";
          document.getElementById("preview-prompt").value = document.getElementById("promptPlaceholder").value || "[Prompt Placeholder]";
        }

        document.querySelectorAll("#generator-form input, #generator-form select").forEach(element => {
          element.addEventListener("input", updatePreview);
          element.addEventListener("change", updatePreview);
        });
      });
    </script>

    <!-- Bootstrap Bundle JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
